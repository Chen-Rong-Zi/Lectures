# 作业四

### 概念题

1. 派生类从基类那里继承了什么？不能继承什么？

2. C++中protected访问说明符与private有何区别？

3. 一个类既有基类，又有成员对象类，它在初始化和消亡的时候，构造函数/析构函数的执行次序是怎样的？

4. 给定下列代码，回答以下问题
   ```C++
   class A{
   	int n, m;
   public:
   	A():n(0), m(0) {}
   	A(int n, int m):n(n), m(m) {}
   	A(const A&a):n(a.n), m(a.m) {}
   	~A(){}
   };

   class B: public A{
   	int x;
   public:
   	B():x(0) {}
   	B(int x):x(x) {}
   	B(const B&b) {}
   	~B() {}
   };

   class C{
   public:
   	C() {}
   	~C() {}
   };

   class D: public C{
   	B b;
   public:
   	D() {}
   	~D() {}
   };

   int main() {
   	D d1;
   	D d2(d1);
   }
   ```

   - 问题1：执行代码 `D d1` 时，给出构造过程的执行流（包含call和return）。
     - 下图给出了 `foo()` 函数执行时的执行流示例
       ![image-20231010150520684](C:\Users\59309\AppData\Roaming\Typora\typora-user-images\image-20231010150520684.png)
```
call C()
return C()
call A()
return A()
call B()
return B()
call D()
return D()
```

   - 问题2：执行代码 `D d2(d1)` 时，给出构造过程的执行流（包含call和return）。
```
call A() 
return A() 
call B(const B &) 
return B(const B &) 
```

   - 问题3：给出 `d1` 析构时，析构过程的执行流（包含call和return）。
```
call ~D()
return ~D()
call ~B()
return ~B()
call ~A()
return ~A()
call ~C()
return ~C()
```

   - 注意：说明调用的构造函数时，需要区分各种重载形式。例如用 `A::A()` ，`A::A(int, int)` ，`A::A(const A&)` 区分`A`类的默认构造函数及其重载

### 编程题

1. 定义一个基类`Shape`，在此基础上派生出`Rectangle`和`Circle`类，二者都有`getArea()`函数计算对象的面积。使用`Rectangle`类创建一个派生类`Square`。

```cpp
# include <self/functional.h>
# include <string>

using namespace util;

const double PI = (3.1415926);

class Shape {
public:
    string shape;
    Shape() {
        this->shape = "Shape";
    }
};

class Rectangle : public Shape {
public:
    double length;
    double width;
    Rectangle() { }
    Rectangle(double length) {
        print("调用Rectangle(double)");
        this->shape  = "Rectangle";
        this->length = length;
        this->width  = length;
    }
    Rectangle(double length, double width) {
        print("调用Rectangle(double, double)");
        this->shape  = "Rectangle";
        this->length = length;
        this->width  = width;
    }
    Rectangle(const Rectangle &other) {
        this->length = other.length;
        this->width  = other.width;
    }

    bool is_Square() {
        return this->length == this->width;
    }

    double getArea() {
        return this->length * this->width;
    }
};


class Circle : public Shape {
public:
    double radius;

    Circle(double radius) {
        this->shape = "Circle";
        this->radius = radius;
    }

    Circle(const Circle &other) {
        this->radius = other.radius;
    }

    double getArea() {
        return PI * this->radius * this->radius;
    }
};

class Square : public Rectangle {
public:
    Square(double length) {
        this->length = length;
        this->width  = length;
    }
    Square(const Square &other) {
        this->length = other.length;
        this->width = other.width;
    }
};

int main(int arg_number, char **arg_value) {
    Square    area(1231.123213);
    Rectangle a(1231.123213,     23);
    Shape     b;
    Circle    c(32);
    print(area.getArea());
    print(a.getArea());
    print(c.getArea());
    return 0;
}

```




### 提交注意事项

截止时间：2024-4-2 23:59

文件格式：姓名-学号.pdf

提交方式：[南大计科在线实验教学平台](https://cslab-cms.nju.edu.cn/)

请同学们于截⽌时间前在南大计科在线实验教学平台上提交，每次作业最终只需要提交⼀个pdf⽂件即可，以“姓名-学号.pdf“的⽅式命名。

注意：
	请按要求命名文件，并且只提交一个PDF文件，编程题代码请附在PDF中。任何错误的命名和文件格式将影响你的作业得分。
